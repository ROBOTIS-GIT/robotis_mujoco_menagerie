<mujoco model="omx">
  <compiler angle="radian" meshdir="assets" autolimits="true"/>

  <option integrator="implicitfast"/>

  <!-- Default -->
  <default>
    <!-- General joint settings -->
    <default class="dxl">
      <joint range="-6.28319 6.28319" armature="0.1" damping="100.0"/>
      <position kp="5000" forcerange="-2000 2000" ctrlrange="-6.28319 6.28319"/>
    </default>
    <!-- Gripper joint settings -->
    <default class="gripper">
      <joint armature="0.1" damping="10.0"/>
      <position kp="1000" forcerange="-100 100" ctrlrange="-0.2 1.0"/>
    </default>
    <!-- Visualization / Non-collision geometry -->
    <default class="visual">
      <geom material="grey" contype="0" conaffinity="0" group="2" />
    </default>
    <!-- Collision geometry -->
    <default class="collision">
      <geom material="collision_material" condim="3" contype="1" conaffinity="1" priority="1" group="1" 
            solref="0.005 1" solimp="0.99 0.999 1e-05" friction="1 0.01 0.01" />
    </default>
  </default>

  <!-- Asset -->
  <asset>
    <material name="grey" rgba="0.2 0.2 0.2 1" />
    <material name="collision_material" rgba="0.2 0.2 0.2 1" />
    <mesh name="follower_01_base" file="follower_01_base.stl" scale="0.001 0.001 0.001"/>
    <mesh name="follower_02_base_tilt_Revised" file="follower_02_base_tilt_Revised.stl" scale="0.001 0.001 0.001"/>
    <mesh name="follower_03_middle_verticle" file="follower_03_middle_verticle.stl" scale="0.001 0.001 0.001"/>
    <mesh name="follower_04_middle_horizontal" file="follower_04_middle_horizontal.stl" scale="0.001 0.001 0.001"/>
    <mesh name="follower_05_tip" file="follower_05_tip.stl" scale="0.001 0.001 0.001"/>
    <mesh name="follower_06_pan_Revised" file="follower_06_pan_Revised.stl" scale="0.001 0.001 0.001"/>
    <mesh name="follower_07_gripper_motorized" file="follower_07_gripper_motorized.stl" scale="0.001 0.001 0.001"/>
    <mesh name="follower_08_gripper_gear" file="follower_08_gripper_gear.stl" scale="0.001 0.001 0.001"/>
  </asset>

  <!-- World -->
  <worldbody>
    <body name="base" pos="0 0 0" quat="1 0 0 0">
      <body name="link0" pos="0 0 0" quat="1 0 0 0">
        <inertial pos="-0.0144 -0.0031 0.0193" quat="1 0 0 0" mass="0.2238" diaginertia="0.0003568 0.0002194 0.0004557"/>
        <geom name="link0_collision" type="mesh" mesh="follower_01_base" class="collision"/>
        <geom name="link0_visual" type="mesh" mesh="follower_01_base" class="visual"/>
        <body name="link1" pos="-0.01125 0 0.034">
          <joint name="joint1" type="hinge" axis="0 0 1" class="dxl"/>
          <inertial pos="-0.000006 0.000605 0.0474" mass="0.0659" diaginertia="2.17e-05 2.13e-05 1.16e-05"/>
          <geom name="link1_collision" type="mesh" mesh="follower_02_base_tilt_Revised" class="collision"/>
          <geom name="link1_visual" type="mesh" mesh="follower_02_base_tilt_Revised" class="visual"/>

          <body name="link2" pos="0 0 0.0635">
            <joint name="joint2" type="hinge" axis="0 1 0" class="dxl"/>
            <inertial pos="0.018 0.00029 0.099" mass="0.0872" diaginertia="0.000103 0.000120 0.000042"/>
            <geom name="link2_collision" type="mesh" mesh="follower_03_middle_verticle" class="collision"/>
            <geom name="link2_visual" type="mesh" mesh="follower_03_middle_verticle" class="visual"/>

            <body name="link3" pos="0.0415 0 0.11315">
              <joint name="joint3" type="hinge" axis="0 1 0" class="dxl"/>
              <geom name="link3_collision" type="mesh" mesh="follower_04_middle_horizontal" class="collision"/>
              <geom name="link3_visual" type="mesh" mesh="follower_04_middle_horizontal" class="visual"/>

              <body name="link4" pos="0.162 0 0">
                <joint name="joint4" type="hinge" axis="0 1 0" class="dxl"/>
                <geom name="link4_collision" type="mesh" mesh="follower_05_tip" class="collision"/>
                <geom name="link4_visual" type="mesh" mesh="follower_05_tip" class="visual"/>

                <body name="link5" pos="0.0287 0 0">
                  <joint name="joint5" type="hinge" axis="1 0 0" class="dxl"/>
                  <geom name="link5_collision" type="mesh" mesh="follower_06_pan_Revised" class="collision"/>
                  <geom name="link5_visual" type="mesh" mesh="follower_06_pan_Revised" class="visual"/>

                  <!-- Gripper -->
                  <body name="link6" pos="0.0295 0.0075 0">
                    <joint name="gripper_joint_1" type="hinge" axis="0 0 1" class="gripper"/>
                    <geom name="link6_collision" type="mesh" mesh="follower_07_gripper_motorized" class="collision"/>
                    <geom name="link6_visual" type="mesh" mesh="follower_07_gripper_motorized" class="visual"/>
                  </body>

                  <body name="link7" pos="0.0295 -0.0108 0">
                    <joint name="gripper_joint_2" type="hinge" axis="0 0 1" class="gripper"/>
                    <geom name="link7_collision" type="mesh" mesh="follower_08_gripper_gear" class="collision"/>
                    <geom name="link7_visual" type="mesh" mesh="follower_08_gripper_gear" class="visual"/>
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <!-- Disable collision between specific links -->
  <contact>
    <exclude body1="link0" body2="link1"/>
  </contact>

  <equality>
    <joint joint1="gripper_joint_1" joint2="gripper_joint_2" polycoef="0 -1 0 0 0"/>
  </equality>

  <!-- Actuator -->
  <actuator>
    <position name="joint1_ctrl" joint="joint1" class="dxl"/>
    <position name="joint2_ctrl" joint="joint2" class="dxl"/>
    <position name="joint3_ctrl" joint="joint3" class="dxl"/>
    <position name="joint4_ctrl" joint="joint4" class="dxl"/>
    <position name="joint5_ctrl" joint="joint5" class="dxl"/>

    <position name="gripper_joint_1_ctrl" joint="gripper_joint_1" class="gripper"/>
  </actuator>

</mujoco>
